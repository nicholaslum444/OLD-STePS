<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="css/main.css">

    <script src="js/jquery-2.1.3.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/main.js"></script>

    <title>STePS</title>

</head>

<body>
    <div class="container">
        <h1>SEE SOURCE FOR EXAMPLE CODE</h1>

        <script>
        // THIS CODE POSTS THE TOKEN (RECEIVED FROM IVLE) TO THE SERVER FOR VERIFICATION
        // THE SERVER WILL START THE SESSION FOR THE USER IF THE TOKEN IS VERIFIED
        (function() {
            console.log("Postman is starting...");

            var postObj = {};
            
            // getUrlparam is a custom method, check source in the jquery.js
            postObj["token"] = $.getUrlParam("token");

            console.log(postObj);

            $.post(
                // post to this url to "login" the user to our servers.
                "php/login.php",

                postObj, // the obj containing the token

                // this function processes the return data
                function(data) {
                    // add steps to process the data received from the server
                    console.log(data);
                    // recommended step: store the token in the localstorage.
                    // the token may be used to verify the session of the user.

                    // all done
                    console.log("Postman is done!");
                });

                console.log("Postman has sent your data!");
            })();
        </script>

        <footer>
            <p>&copy; Website for STePS</p>
        </footer>

    </div> <!-- End of container -->

</body>

</html>
